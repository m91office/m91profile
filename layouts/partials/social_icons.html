{{/* social_icons.html */}}
{{- $banner := $.Site.Params.banner -}}

{{- $pos := "after" -}}
{{- with $banner }}{{ with .position }}{{ $pos = . }}{{ end }}{{ end -}}

<div class="social-icons" {{ with .align }}align="{{ . }}"{{ end }}>
  {{- if and $banner (eq $pos "before") -}}
    <a class="banner" href="{{ $banner.url | safeURL }}" target="_blank" rel="noopener"
       aria-label="{{ $banner.alt }}">
      <img src="{{ $banner.image | relURL }}" alt="{{ $banner.alt }}" loading="lazy">
    </a>
  {{- end -}}

  {{- range site.Params.socialIcons -}}
    <a href="{{ trim .url " " | safeURL }}" target="_blank" rel="me noopener noreferrer"
       title="{{ (.title | default .name) | title }}">
      {{- /* ← ここを .name ではなく . を渡すのがポイント */ -}}
      {{- partial "svg.html" . -}}
    </a>
  {{- end -}}

  {{- if and $banner (ne $pos "before") -}}
    <a class="banner" href="{{ $banner.url | safeURL }}" target="_blank" rel="noopener"
       aria-label="{{ $banner.alt }}">
      <img src="{{ $banner.image | relURL }}" alt="{{ $banner.alt }}" loading="lazy">
    </a>
  {{- end -}}
</div>
