{{/* 1) この partial は . に SNS アイコンの配列が入って来る */}}
{{- $icons := . -}}

{{/* 2) ルートコンテキストから banner を取得（$.Site を明示） */}}
{{- $banner := $.Site.Params.banner -}}

{{/* 3) position は未設定でも落ちないように既定値 "after" を用意 */}}
{{- $pos := "after" -}}
{{- with $banner }}
  {{- with .position }}{{ $pos = . }}{{ end -}}
{{- end -}}

<div class="social-icons">
  {{- if and $banner (eq $pos "before") -}}
    <a class="banner" href="{{ $banner.url }}" target="_blank" rel="noopener"
       aria-label="{{ $banner.alt }}">
      <img src="{{ $banner.image | relURL }}" alt="{{ $banner.alt }}" loading="lazy">
    </a>
  {{- end -}}

  {{- range $icons -}}
    <a href="{{ .url }}" target="_blank" rel="me noopener noreferrer"
       title="{{ .title | default .name }}">
      {{- partial "svg.html" .name -}}
    </a>
  {{- end -}}

  {{- if and $banner (ne $pos "before") -}}
    <a class="banner" href="{{ $banner.url }}" target="_blank" rel="noopener"
       aria-label="{{ $banner.alt }}">
      <img src="{{ $banner.image | relURL }}" alt="{{ $banner.alt }}" loading="lazy">
    </a>
  {{- end -}}
</div>
